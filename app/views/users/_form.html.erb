<% if @user_form.errors.present? && @user_form.errors.any? %>
  <div class="error_message_box">
    <ul>
      <% @user_form.errors.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
<% end %>
<div class="container">
  <div class="row">
    <div class="col-10">
      <div class='center_form'>
        <%= form_with(model: @user_form , url: users_path , method: choose_method_new_or_edit , local: true) do |form| %>
          <%= form.fields_for :user , @user_form.user do |user_fields| %>
            <div class="form-group">
              <%= user_fields.label :name , I18n.t("model.name")  %>
              <%= user_fields.text_field :name ,class:'form-control' %>
            </div>
          <% end %>
          <%= form.fields_for :user_detail , @user_form.user_detail  do |user_detail_fields| %>
            <div class="form-group">
              <%= user_detail_fields.label :email , I18n.t("model.email")  %>
              <%= user_detail_fields.email_field :email ,class:'form-control' %>
            </div>
            <div class="form-group">
              <%= user_detail_fields.label :icon , I18n.t("model.icon")  %>
              <%= user_detail_fields.file_field :icon %>
            </div>
          <% end %>
          <%= form.fields_for :user , @user_form.user  do |user_fields| %>
            <div class="form-group">
              <%= user_fields.label :password , I18n.t("model.password")  %>
              <%= user_fields.password_field :password ,class:'form-control' %>
            </div>
            <div class="form-group">
              <%= user_fields.label :password_digest , I18n.t("model.password_digest")  %>
              <%= user_fields.password_field :password_digest ,class:'form-control' %>
            </div>
          <% end %>
          <%= form.submit nil ,class:'btn btn-primary' %>
        <% end %>
      </div>
    </div>
  </div>
</div>